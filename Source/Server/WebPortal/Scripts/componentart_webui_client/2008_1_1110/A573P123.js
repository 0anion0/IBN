if(!window.ComponentArt_ComboBox_Kernel_Loaded||window.ComponentArt_ComboBox_ReLoad){function ComponentArt_ComboBox(id){this.DomElementId=id;this.element=this.DomElement=document.getElementById(this.DomElementId);if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBox.initializeBase(this,[this.element]);this.beginUpdate=function(){this._updating=true;};this.dispose=function(){ComponentArt.Web.UI.ComboBox.callBaseMethod(this,"dispose");this.Dispose();};this.endUpdate=function(){this._updating=false;this.Render(true);};this.get_isUpdating=function(){return this._updating;};this.getDescriptor=function(){return _qEF(this.constructor);};}else{this.beginUpdate=function(){this._updating=true;};this.endUpdate=function(){this._updating=false;this.Render(true);};this.get_isUpdating=function(){return this._updating;};}this.ClientControlId=this.Id=id;this.ItemHeight=10;}ComponentArt_ComboBox.prototype.PublicProperties=[["CssClass",String],["ItemCount",Number],["SelectedIndex",Number,1],["Text",String,1,1],["TextBoxCssClass",String]];ComponentArt_ComboBox.prototype.PublicMethods=[["AddItem",,null,[["item",Object],["index",Number]]],["Collapse"],["Disable"],["Dispose"],["Enable"],["Expand"],["Filter",,null,[["filterString",String]]],["FindItemByProperty",,Object,[["propertyName",String],["propertyValue",Object]]],["Focus"],["GetItem",,Object,[["index",Number]]],["GetSelectedItem",,Object],["RemoveAll"],["RemoveItemAt",,null,[["index",Number]]],["SelectItem",,null,[["item",Object]]],["SelectItemByIndex",,null,[["id",String]]],["ToggleExpand"],["UnSelect"]];ComponentArt_ComboBox.prototype.PublicEvents=[["CallbackComplete"],["CallbackError"],["Change"],["Collapse"],["Expand"],["Load"],["Init"]];_qEE(ComponentArt_ComboBox);window.ComponentArt.Web.UI.ComboBox=window.ComponentArt_ComboBox;if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBox.registerClass("ComponentArt.Web.UI.ComboBox",Sys.UI.Control);if(Sys.TypeDescriptor){Sys.TypeDescriptor.addType("componentArtWebUI","comboBox",ComponentArt.Web.UI.ComboBox);}}function ComponentArt_ComboBoxItem(_2){if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBoxItem.initializeBase(this);this.getDescriptor=function(){return _qEF(this.constructor);};}this.Enabled=true;if(_2){this.Data=_2;}else{this.Data=[];}}ComponentArt_ComboBoxItem.prototype.PublicProperties=[["ClientTemplateId"],["CssClass"],["Enabled"],["Id"],["Text"],["Value"]];ComponentArt_ComboBoxItem.prototype.PublicMethods=[["GetProperty",,Object],["SetProperty",,,[["propertyName",String],["propertyValue",Object]]]];_qEE(ComponentArt_ComboBoxItem);window.ComponentArt.Web.UI.ComboBoxItem=window.ComponentArt_ComboBoxItem;if(window.ComponentArt_Atlas){ComponentArt.Web.UI.ComboBoxItem.registerClass("ComponentArt.Web.UI.ComboBoxItem");if(Sys.TypeDescriptor){Sys.TypeDescriptor.addType("componentArtWebUI","comboBoxItem",ComponentArt.Web.UI.ComboBoxItem);}}ComponentArt_ComboBoxItem.prototype.GetProperty=function(_3,_4){for(var i=0;i<this.Data.length;i++){if(this.Data[i][0]==_3){return this.Data[i][1];}}return _4;};ComponentArt_ComboBoxItem.prototype.SetProperty=function(_6,_7){var _8=false;for(var i=0;i<this.Data.length;i++){if(this.Data[i][0]==_6){this.Data[i][1]=_7;_8=true;break;}}if(!_8){this.Data[this.Data.length]=[_6,_7];}this[_6]=_7;};ComponentArt_ComboBox.prototype.get_text=function(){var _a=document.getElementById(this.Id+"_Input");return _a?_a.value:"";};ComponentArt_ComboBox.prototype.set_text=function(_b){var _c=document.getElementById(this.Id+"_Input");if(_c){_c.value=_b;this.HandleInputChange();}};ComponentArt_ComboBox.prototype.GetProperty=function(_d){return this[_d];};ComponentArt_ComboBox.prototype.SetProperty=function(_e,_f){this[_e]=_f;};ComponentArt_ComboBox.prototype.AddItem=function(_10,_11){if(!(_11||_11==0)){_11=this.Data.length;}this.Data=this.Data.slice(0,_11).concat([_10.Data]).concat(this.Data.slice(_11));this.ItemCount++;this.LoadedItemCount++;this.TextCache.length=0;this.CssClasses.length=0;};ComponentArt_ComboBox.prototype.Callback=function(url,_13){if(this.CallingBack){return false;}var _14=this;var _15=false;var _16;function Cleanup(){_14.CallingBack=false;_14.HideReloading();if(_14.AutoComplete||_14.AutoHighlight){_14.CompleteAndHighlight();}}function _q19E(){if(_16.readyState&&_16.readyState!=4&&_16.readyState!="complete"){return;}var _17=_15?_16.responseXML:_16;if(_17&&_17.documentElement&&_17.documentElement.childNodes.length==2){var _18=_17.documentElement.childNodes[0];var _19=_17.documentElement.childNodes[1];if(_18.nodeName=="ComboBoxError"){var _1a=_18.firstChild.nodeValue;var _1b=_14.get_events().getHandler("callbackError");if(_1b){_1b(_14,new ComponentArt.Web.UI.ComboBoxCallbackErrorEventArgs(_1a));}else{alert("Callback error:\n"+_1a);}}else{var _1c=_18.firstChild.nodeValue;var _1d=eval(_1c);_14.LoadItems(_1d,_13);_14.LoadParams(_19.childNodes);_14.Render(true);}}else{if(_16.status&&_16.status!=200&&_16.responseText){document.body.innerHTML=_16.responseText;}else{alert("Error loading callback data.");}}Cleanup();var _1b=_14.get_events().getHandler("callbackComplete");if(_1b){_1b(_14,Sys.EventArgs.Empty);}}this.CallingBack=true;if(window.XMLHttpRequest){_15=true;var _16=new XMLHttpRequest();_16.onreadystatechange=_q19E;_16.open("GET",url,true);_16.send(null);}else{if(document.implementation&&document.implementation.createDocument){_16=document.implementation.createDocument("","",null);_16.onload=_q19E;}else{if(cart_browser_ie){var _1e=this.Id+"_island";var _1f=document.getElementById(_1e);if(!_1f){_1f=document.createElement("xml");_1f.id=_1e;document.body.appendChild(_1f);}if(_1f.XMLDocument){_16=_1f.XMLDocument;_16.onreadystatechange=_q19E;}else{return false;}}else{return false;}}}if(!_15){_16.async=true;try{_16.load(url);}catch(ex){Cleanup();alert("Data not loaded: "+(ex.message?ex.message:ex));}}return true;};ComponentArt_ComboBox.prototype.Collapse=function(){if(this.Resizing){return;}var _20=document.getElementById(this.Id+"_DropDown");if(_20&&_20.style.display!="none"){_20.style.overflow="hidden";this.CollapseElement=_20;this.CollapseStartTime=(new Date()).getTime();var _21=ComponentArt_GetAdjustedHeight(_20);ComponentArt_ComboBox_CollapseStep(this,_21);}this.Expanded=false;};ComponentArt_ComboBox.prototype.CollapseIfBlurred=function(){if(document.activeElement){var _22=document.getElementById(this.Id+"_DropDown");for(var o=document.activeElement;o.parentNode&&o.parentNode!=document.body;o=o.parentNode){if(o.parentNode==_22){this.Focus();break;}}}if(!this.Focused){this.Collapse();}};ComponentArt_ComboBox.prototype.CompleteAndHighlight=function(){var _24=document.getElementById(this.Id+"_Input");if(!_24){return;}if(!_24.value){if(this.SelectedIndex>=0){this.UnSelect();}return;}var _25=_q113(_24);if(!_25){return;}var _26=_24.value.toLowerCase().substring(0,_25);var _27=false;for(var i=0;i<this.TextCache.length;i++){var _29=this.TextCache[i];if(_29&&_29.toLowerCase().indexOf(_26)==0){if(this.AutoComplete){_24.value=_29;this.SelectItemByIndex(i);ComponentArt_SetSelectionRange(_24,_26.length,_24.value.length);}if(this.AutoHighlight){if(!this.AutoComplete){this.SelectItemByIndex(i);}this.Expand();}_27=true;break;}}if(!_27&&this.SelectedIndex>=0){this.UnSelect();}};ComponentArt_ComboBox.prototype.Disable=function(){if(this.element){this.element.disabled=true;}if(this.TextBoxEnabled){var _2a=document.getElementById(this.Id+"_Input");if(_2a){_2a.disabled=true;if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_2a.className=this.TextBoxDisabledCssClass;}}}else{var _2b=document.getElementById(this.Id+"_TextBox");if(_2b){if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_2b.className=this.TextBoxDisabledCssClass;}}}this.Collapse();if(this.DisabledCssClass&&this.CssClass){this.element.className=this.DisabledCssClass;}this.Disabled=true;};ComponentArt_ComboBox.prototype.Dispose=function(){ComponentArt_Dispose(this);ComponentArt_RemoveKeyHandlers(this);this.CollapseElement=this.ExpandElement=null;if(this.OverlayElement){_qF2(this.OverlayElement);}if(this.CallbackProgressDomObj){_qF2(this.CallbackProgressDomObj);}if(this.ContainerObj){_qF2(this.ContainerObj);}window.ComponentArt_ComboBox_ReLoad=true;};ComponentArt_ComboBox.prototype.Enable=function(){if(this.element){this.element.disabled=false;}if(this.TextBoxEnabled){var _2c=document.getElementById(this.Id+"_Input");if(_2c){_2c.disabled=false;if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_2c.className=this.TextBoxCssClass;}}}else{var _2d=document.getElementById(this.Id+"_TextBox");if(_2d){if(this.TextBoxDisabledCssClass&&this.TextBoxCssClass){_2d.className=this.TextBoxCssClass;}}}if(this.DisabledCssClass&&this.CssClass){this.element.className=this.CssClass;}this.Disabled=false;};ComponentArt_ComboBox.prototype.EnsureDomElement=function(){this.element=this.DomElement=document.getElementById(this.DomElementId);};ComponentArt_ComboBox.prototype.Expand=function(){this.EnsureDomElement();var _2e=document.getElementById(this.Id+"_DropDown");var _2f=document.getElementById(this.Id+"_DropDownContent");if(_2e&&_2e.style.display=="none"){var x=_q85(this.element);var y=this.ExpandBaseLine=_q86(this.element)+(this.ExpandDirection==0?ComponentArt_GetAdjustedHeight(this.element):-1);x+=this.DropDownOffsetX;y+=this.DropDownOffsetY;this.DropDownX=x;this.DropDownY=y;if(this.AdjustPositioning){var _32=ComponentArt_ComboBox_GetOffsetX(_2e.parentNode,"relative");var _33=ComponentArt_ComboBox_GetOffsetY(_2e.parentNode,"relative");if(_32<=x){x-=_32;}if(_33<=y){y-=_33;}var _34=ComponentArt_ComboBox_GetOffsetX(_2e.parentNode,"absolute");var _35=ComponentArt_ComboBox_GetOffsetY(_2e.parentNode,"absolute");if(_34<=x){x-=_34;}if(_35<=y){y-=_35;}}if(this.element.parentNode){y-=this.element.parentNode.scrollTop;x-=this.element.parentNode.scrollLeft;}_2e.style.zIndex=90310;_2e.style.position="absolute";_2e.style.top=y+"px";_2e.style.left=x+"px";_2e.style.height="";_2e.style.visibility="hidden";_2e.style.display="";if(!this.DropDownWidth){this.DropDownWidth=ComponentArt_GetAdjustedWidth(this.element);}_2e.style.width=this.DropDownWidth+"px";var _36=ComponentArt_GetAdjustedWidth(_2f.parentNode,this.DropDownWidth);_2f.style.width=_36-(this.CacheMapWidth?this.CacheMapWidth:0)+"px";if(!this.DropDownHeight){if(this.HasDropDownContent){this.DropDownHeight=ComponentArt_GetAdjustedHeight(_2f);this.ItemHeight=0;}else{if(_2f.childNodes.length>this.DropDownPageSize){this.DropDownHeight=_2f.childNodes[this.DropDownPageSize].offsetTop;this.ItemHeight=Math.round(this.DropDownHeight/this.DropDownPageSize);}else{this.ItemHeight=ComponentArt_GetAdjustedHeight(_2f.firstChild);this.DropDownHeight=this.ItemHeight*this.DropDownPageSize;}}}_2f.style.height=this.DropDownHeight+"px";_2f.style.overflow="auto";_2f.style.overflowX="hidden";var _37=ComponentArt_GetAdjustedHeight(_2e);_2e.style.height="1px";_2e.style.overflow="hidden";_2e.style.visibility="";this.ExpandStartTime=(new Date()).getTime();this.ExpandElement=_2e;ComponentArt_ComboBox_ExpandStep(this,_37);}this.Expanded=true;};ComponentArt_ComboBox.prototype.Fetch=function(_38,_39){var _3a=document.getElementById(this.Id+"_CacheMap");if(_3a){for(var i=_38;i<_38+_39;i++){this.Data[i]=[];}this.RenderCacheMap(_3a);}var url=this.CallbackPrefix+"&Cart_"+this.Id+"_Callback_StartIndex="+_38+"&Cart_"+this.Id+"_Callback_NumItems="+_39;if(this.CallbackFilterString){url+="&Cart_"+this.Id+"_Callback_Filter="+encodeURIComponent(this.CallbackFilterString);}this.LoadedItemCount+=_39;while(this.LoadedItemCount>this.CacheSize){this.UnloadStalePage();}this.Callback(url,_38);};ComponentArt_ComboBox.prototype.Filter=function(_3d){if(this.RunningMode==0){this.FilterString=_3d.toLowerCase();this.RenderDropDown();return true;}else{if(_3d&&this.CallbackFilterString&&_3d.indexOf(this.CallbackFilterString)==0&&this.Data.length==this.ItemCount){this.FilterString=_3d.toLowerCase();this.CallbackFilterString=_3d;this.RenderDropDown();return true;}var _3e=false;var _3f=false;if(this.FilterCache){var _40=_3d.toLowerCase();var _41=this.CallbackFilterString?this.CallbackFilterString.toLowerCase():"";var _42=[_41,this.ItemCount,this.Data.concat()];for(var i=0;i<this.FilterCache.length;i++){if(this.FilterCache[i][0]==_40){_3e=true;this.CallbackFilterString=_3d;this.ItemCount=this.FilterCache[i][1];this.Data=this.FilterCache[i][2].concat();}if(this.FilterCache[i][0]==_41){_3f=true;}}if(_42&&!_3f){this.FilterCache=[_42].concat(this.FilterCache);if(this.FilterCache.length>this.FilterCacheSize){this.FilterCache.length=this.FilterCacheSize;}}}this.FilterString=null;if(_3e){this.RenderDropDown();return true;}else{this.Data.length=0;this.CallbackFilterString=_3d;this.ShowReloading();this.Fetch(0,this.DropDownPageSize*2);return false;}}};ComponentArt_ComboBox.prototype.FindItemByProperty=function(_44,_45){for(var i=0;i<this.Data.length;i++){var _47=this.GetItem(i);if(_47.GetProperty(_44)==_45){return _47;}}return null;};ComponentArt_ComboBox.prototype.Focus=function(){var _48=document.getElementById(this.Id+"_Input");if(_48){try{_48.focus();}catch(ex){}}this.Focused=true;if(this.KeyboardShouldBeEnabled){this.KeyboardEnabled=true;}};ComponentArt_ComboBox.prototype.GetClientTemplate=function(sID){if(this.ClientTemplates){for(var i=0;i<this.ClientTemplates.length;i++){if(this.ClientTemplates[i][0]==sID){return this.ClientTemplates[i][1];}}}return null;};ComponentArt_ComboBox.prototype.GetItem=function(_4b){if(this.Data.length>_4b&&_4b>=0){var _4c=this.Data[_4b];if(_4c){var _4d=new ComponentArt_ComboBoxItem(_4c);for(var i=0;i<_4c.length;i++){_4d[_4c[i][0]]=_4c[i][1];}if(_4d.Text==null){_4d.Text="";}_4d.ParentComboBox=this;_4d.Index=_4b;return _4d;}else{return null;}}return null;};ComponentArt_ComboBox.prototype.GetSelectedItem=function(){if(this.SelectedIndex>=0){return this.GetItem(this.SelectedIndex);}return null;};ComponentArt_ComboBox.prototype.HandleBlur=function(e){if(this.CssClass&&this.FocusedCssClass&&this.element){this.element.className=this.CssClass;}if(this.TextBoxFocusedCssClass){if(this.TextBoxEnabled){var _50=document.getElementById(this.Id+"_Input");if(_50){_50.className=this.TextBoxCssClass;}}else{var _51=document.getElementById(this.Id+"_TextBox");if(_51){_51.className=this.TextBoxCssClass;}}}this.Focused=false;if(this.KeyboardEnabled){this.KeyboardShouldBeEnabled=true;this.KeyboardEnabled=false;}setTimeout(this.Id+".CollapseIfBlurred()",100);};ComponentArt_ComboBox.prototype.HandleClick=function(e,o,_54){ComponentArt_CancelEvent(e);this.Collapse();this.SelectItemByIndex(_54);if(this.AutoPostBack){this.Postback();}};ComponentArt_ComboBox.prototype.HandleDropClick=function(e,o){if(!this.Disabled){if(this.DropActiveImageUrl){o.src=this.DropActiveImageUrl;}this.ToggleExpand();setTimeout(this.Id+".Focus()",10);}return false;};ComponentArt_ComboBox.prototype.HandleDropMouseUp=function(e,o){if(this.DropActiveImageUrl){if(this.DropHoverImageUrl){e.src=this.DropHoverImageUrl;}else{e.src=this.DropImageUrl;}}};ComponentArt_ComboBox.prototype.HandleFocus=function(){this.EnsureDomElement();window._q136=this;if(this.FocusedCssClass&&this.element){this.element.className=this.FocusedCssClass;}if(this.TextBoxEnabled){var _59=document.getElementById(this.Id+"_Input");_59.select();}if(this.TextBoxFocusedCssClass){if(this.TextBoxEnabled){var _59=document.getElementById(this.Id+"_Input");if(_59){_59.className=this.TextBoxFocusedCssClass;}}else{var _5a=document.getElementById(this.Id+"_TextBox");if(_5a){_5a.className=this.TextBoxFocusedCssClass;}}}this.Focused=true;if(this.KeyboardShouldBeEnabled){this.KeyboardEnabled=true;}};ComponentArt_ComboBox.prototype.HandleInputChange=function(){var _5b=document.getElementById(this.Id+"_Input");if(_5b.value!=this.InputValue){this.InputValue=_5b.value;}else{return;}var _5c=_q113(_5b);var _5d=this.GetSelectedItem();if(_5d&&_5d.Text==this.InputValue){return;}if(this.AutoFilter){var _5e=_5b.value;_5e=_5e.substring(0,_5c);if(this.RunningMode==1){this.Expand();clearTimeout(this.FilterTimeout);this.FilterTimeout=setTimeout("if("+this.Id+".Filter('"+_5e.replace("'","\\'")+"')) {"+this.Id+".CompleteAndHighlight(); }",250);return;}else{this.Filter(_5e);this.Expand();}}if(this.AutoComplete||this.AutoHighlight){this.CompleteAndHighlight();}};ComponentArt_ComboBox.prototype.HandleInputMouseOut=function(e,o){if(this.TextBoxHoverCssClass){if(this.TextBoxEnabled){var _61=document.getElementById(this.Id+"_Input");if(_61){_61.className=this.TextBoxCssClass;}}else{var _62=document.getElementById(this.Id+"_TextBox");if(_62){_62.className=this.TextBoxCssClass;}}}if(this.DropHoverImageUrl){var _63=document.getElementById(this.Id+"_DropImage");if(_63){_63.src=this.DropImageUrl;}}if(this.CssClass&&this.HoverCssClass&&this.element){this.element.className=this.CssClass;}};ComponentArt_ComboBox.prototype.HandleInputMouseOver=function(e,o){if(this.TextBoxHoverCssClass){if(this.TextBoxEnabled){var _66=document.getElementById(this.Id+"_Input");if(_66&&_66.className==this.TextBoxCssClass){_66.className+=" "+this.TextBoxHoverCssClass;}}else{var _67=document.getElementById(this.Id+"_TextBox");if(_67&&_67.className==this.TextBoxCssClass){_67.className+=" "+this.TextBoxHoverCssClass;}}}if(this.DropHoverImageUrl){var _68=document.getElementById(this.Id+"_DropImage");if(_68){_68.src=this.DropHoverImageUrl;}}if(this.CssClass&&this.HoverCssClass&&this.element&&this.element.className==this.CssClass){this.element.className+=" "+this.HoverCssClass;}};ComponentArt_ComboBox.prototype.HandleItemMouseOver=function(e,o,_6b){try{if(ComponentArt_Contains(o,ComponentArt_FromElement(e))){return;}}catch(ex){}o.className+=" "+this.CssClasses[_6b].Hover;};ComponentArt_ComboBox.prototype.HandleItemMouseOut=function(e,o,_6e){try{if(ComponentArt_Contains(o,ComponentArt_ToElement(e))){return;}}catch(ex){}o.className=this.CssClasses[_6e].Base;};ComponentArt_ComboBox.prototype.HandleKeyPress=function(e,o){var _71=cart_browser_ie?e.keyCode:e.which;if(_71==8){var _72=_q113(o);var _73=_q110(o);if(_73>_72){var _74=_72;if(_74>1){o.value=o.value.substring(0,_74-1);ComponentArt_SetSelectionRange(o,_74-1,o.value.length);}else{o.value="";ComponentArt_SetSelectionRange(o,0,0);}ComponentArt_CancelEvent(e);}}else{if(_71==13){this.Collapse();ComponentArt_CancelEvent(e);if(this.AutoPostBack){this.Postback();}return;}}setTimeout(this.Id+".HandleInputChange()",1);};ComponentArt_ComboBox.prototype.HandleMouseDown=function(e,o){ComponentArt_CancelEvent(e);if(this.ResizeArea){_qE7=this;var _77=document.getElementById(this.Id+"_DropDown");var _78=cart_browser_ie?event.clientX+(document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):e.pageX;var _79=cart_browser_ie?event.clientY+(document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):e.pageY;_qE8=document.createElement("table");_qE8.cellSpacing=100;_qE8.style.position="absolute";_qE8.style.zIndex=100000;_qE8.style.left=(_78-100)+"px";_qE8.style.top=(_79-100)+"px";_qE8.style.cursor=this.DropDownResizingMode=="Corner"?"se-resize":"s-resize";_qE8.appendChild(document.createElement("tbody"));_qE8.firstChild.appendChild(document.createElement("tr"));_qE8.firstChild.firstChild.appendChild(document.createElement("td"));document.body.insertBefore(_qE8,document.body.firstChild);if(this.DropDownResizingStyle=="Outline"){_qE9=null;_qEA=document.createElement("div");_qEA.style.zIndex=90211;_qEA.style.border="1px solid #505050";_qEA.style.position="absolute";_qEA.style.top=_q86(_77)+"px";_qEA.style.left=_q85(_77)+"px";_qEA.style.height=ComponentArt_GetAdjustedHeight(_77)+"px";_qEA.style.width=ComponentArt_GetAdjustedWidth(_77)+"px";document.body.insertBefore(_qEA,document.body.firstChild);}else{_qE9=document.getElementById(this.Id+"_DropDownContent");_qEA=_77;}_qEB=cart_browser_ie?event.clientX+(document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):e.pageX;_qEC=cart_browser_ie?event.clientY+(document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):e.pageY;this.Resizing=true;var _7a=document.getElementById(this.Id+"_CacheMap");if(_7a){_7a.innerHTML="";}_qE8.onmousemove=_qE5;_qE8.onmouseup=_qE6;}setTimeout(this.Id+".Focus()",10);return false;};ComponentArt_ComboBox.prototype.HandleMouseMove=function(e,o){var _7d=15;if(this.Resizing){return true;}else{var _7e=cart_browser_ie?event.clientX+(document.documentElement&&document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft):e.pageX;var _7f=cart_browser_ie?event.clientY+(document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):e.pageY;var _80=this.DropDownHeight;var _81=this.DropDownWidth;if(this.DropDownResizingMode!="Off"){var _82=document.getElementById(this.Id+"_DropDown");if(_82){_80=ComponentArt_GetAdjustedHeight(_82);}}if(this.DropDownResizingMode=="Corner"){if(Math.abs(_7e-(this.DropDownX+_81))<_7d&&Math.abs(_7f-(this.DropDownY+_80))<_7d){this.ResizeArea=true;o.style.cursor="se-resize";}}else{if(this.DropDownResizingMode=="Bottom"){if(Math.abs(_7f-(this.DropDownY+_80))<_7d){this.ResizeArea=true;o.style.cursor="s-resize";}}}}};ComponentArt_ComboBox.prototype.HandleMouseOut=function(e,o){this.ResizeArea=false;o.style.cursor="";};ComponentArt_ComboBox.prototype.HandleMouseUp=function(e,o){if(this.Scrolling){clearTimeout(this.FetchTimeout);this.HandleScrollFetch();}};ComponentArt_ComboBox.prototype.HandleScroll=function(){if(this.RunningMode!=1){return;}var o=document.getElementById(this.Id+"_DropDownContent");this.Scrolling=true;var _88=Math.round((o.scrollTop*(this.ItemCount-1))/(o.scrollHeight-o.offsetHeight));clearTimeout(this.FetchTimeout);if(_88>=0&&_88<this.ItemCount){var _89=Math.floor(_88/this.DropDownPageSize);this.PageViews[_89]=++this.PageViewOrder;this.ScrollIndex=_88;this.FetchTimeout=setTimeout(this.Id+".HandleScrollFetch()",500);}};ComponentArt_ComboBox.prototype.HandleScrollFetch=function(){this.Scrolling=false;if(this.ItemCount<=this.Data.length){return;}var _8a=this.ScrollIndex;var _8b=this.DropDownPageSize*2;var _8c=_8a-_8a%this.DropDownPageSize;var _8d=_8c+this.DropDownPageSize;if(!this.Data[_8a]||!this.Data[_8c]||!this.Data[_8d]){var _8e=!this.Data[_8a]?_8a:!this.Data[_8c]?_8c:_8d;var _8f=_8e;for(var i=0;i<_8b&&_8f>0;i++){if(this.Data[_8f-1]){break;}_8f--;}var _91=_8e;for(var i=0;i<_8b&&_91<this.ItemCount;i++){if(this.Data[_91]){break;}_91++;}this.Fetch(_8f,_91-_8f);}};ComponentArt_ComboBox.prototype.HideOverlay=function(){if(this.OverlayElement){this.OverlayElement.style.display="none";}};ComponentArt_ComboBox.prototype.HideReloading=function(){if(this.CallbackProgressDomObj){this.CallbackProgressDomObj.style.display="none";}};ComponentArt_ComboBox.prototype.Initialize=function(){_q131(this);if(this.EnableViewState){ComponentArt_ClientStateControls[ComponentArt_ClientStateControls.length]=this;}this.element.style.visibility="";this.PageViews=[1];this.PageViewOrder=1;this.LoadedItemCount=this.Data.length;this.TextCache=[];this.CssClasses=[];if(this.AutoFilter){this.FilterCache=[];}var _92=this.get_events().getHandler("init");if(_92){_92(this,Sys.EventArgs.Empty);}var _93=document.getElementById(this.Id+"_Input");if(_93){_93.style.width="1px";_93.style.visibility="hidden";_93.style.display="";var _94=ComponentArt_GetAdjustedWidth(_93.parentNode)+ComponentArt_GetAdjustedWidth(_93,0);if(_94>10){_93.style.width=_94+"px";}else{if(this.Width){_93.style.width=this.Width+"px";}}_93.style.visibility="";_93.ComponentArtInput=true;_93.autocomplete="off";_93.onsubmit=ComponentArt_CancelEvent;}var _95=document.createElement("div");_95.style.position="absolute";_95.style.visibility="hidden";document.body.insertBefore(_95,document.body.firstChild);this.ContainerObj=_95;this.Initialized=true;if(this.ClientRenderCondition){ComponentArt_WaitOnCondition(this.ClientRenderCondition,this.Id+".InitialRender()");}else{this.InitialRender();}};ComponentArt_ComboBox.prototype.InitialRender=function(){this.Render(true);var _96=document.getElementById(this.Id+"_DropDownContent");if(_96){_96.onscroll=new Function(this.Id+".HandleScroll()");_96.onfocus=new Function(this.Id+".Focus()");}if(!this.Enabled){this.Disable();}var _97=this.get_events().getHandler("load");if(_97){_97(this,Sys.EventArgs.Empty);}if(this.KeyboardEnabled){this.KeyboardShouldBeEnabled=true;this.KeyboardEnabled=false;}this.Rendered=true;};ComponentArt_ComboBox.prototype.LoadItems=function(_98,_99){if(_98.length>0){for(var i=0;i<_98.length;i++){this.Data[_99+i]=_98[i];var _9b=Math.floor((_99+i)/this.DropDownPageSize);this.PageViews[_9b]=++this.PageViewOrder;}}};ComponentArt_ComboBox.prototype.LoadParams=function(_9c){for(var _9d=0;_9d<_9c.length;_9d++){var _9e=_9c.item(_9d);var _9f=_9e.nodeName;var _a0=_9e.firstChild?_9e.firstChild.nodeValue:null;this[_9f]=_a0;}};ComponentArt_ComboBox.prototype.RemoveAll=function(){this.Data.length=0;};ComponentArt_ComboBox.prototype.RemoveItemAt=function(_a1){if(_a1>=0&&_a1<this.Data.length){this.Data=this.Data.slice(0,_a1).concat(this.Data.slice(_a1+1));this.ItemCount--;this.LoadedItemCount--;this.TextCache.length=0;this.CssClasses.length=0;}};ComponentArt_ComboBox.prototype.Render=function(_a2){this.element=this.DomElement=document.getElementById(this.DomElementId);if(this.element){this.element.className=this.CssClass;}if(this.TextBoxClientTemplateId){var _a3=document.getElementById(this.Id+"_TextBox");if(_a3){var _a4=this.GetClientTemplate(this.TextBoxClientTemplateId);if(_a4){var _a5=ComponentArt_InstantiateClientTemplate(_a4,this,this.GetSelectedItem());if(_a5){var _a6="#$InputBox";if(_a5.indexOf(_a6)>=0){var _a7=document.getElementById(this.Id+"_Input");if(_a7){if(this.InputBox){this.RestoreInputBox();}var _a8="<div id=\""+this.Id+"_InputBoxPlaceHolder\" style=\"overflow:hidden;height:"+_a7.offsetHeight+"px;width:"+_a7.offsetWidth+"px;\">&nbsp;</div>";_a5=_a5.replace(_a6,_a8);var _a9=document.createElement("div");_a9.innerHTML=_a8;this.ContainerObj.appendChild(_a7.parentNode.replaceChild(_a9,_a7));this.InputBox=_a7;}}_a3.innerHTML=_a5;if(this.InputBox){clearTimeout(this.RestoreInputBoxTimeout);this.RestoreInputBoxTimeout=setTimeout(this.Id+".RestoreInputBox()",0);}}}}}else{if(this.TextBoxEnabled){var _a7=document.getElementById(this.Id+"_Input");if(_a7){_a7.className=this.TextBoxCssClass;}}else{var _a3=document.getElementById(this.Id+"_TextBox");if(_a3){_a3.className=this.TextBoxCssClass;}}}var _aa=document.getElementById(this.Id+"_CacheMap");if(_aa){this.RenderCacheMap(_aa);}if(_a2){this.RenderDropDown();}};ComponentArt_ComboBox.prototype.RenderCacheMap=function(_ab){var _ac=["<table width=\""+this.CacheMapWidth+"\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">"];for(var i=0;i<_ab.offsetHeight;i++){var _ae=this.Data[Math.round((i*this.ItemCount)/_ab.offsetHeight)];var _af=_ae?(_ae.length==0?this.CacheMapLoadingColor:this.CacheMapLoadedColor):this.CacheMapNotLoadedColor;_ac[_ac.length]="<tr><td height=\"1\" bgcolor=\""+_af+"\"></td></tr>";}_ac[_ac.length]="</table>";_ab.innerHTML=_ac.join("");};ComponentArt_ComboBox.prototype.RenderDropDown=function(){if(this.HasDropDownContent){return;}var _b0=document.getElementById(this.Id+"_DropDownContent");if(_b0){var _b1=0;var _b2=[];for(var i=0;i<this.ItemCount;i++){var _b4=i<this.Data.length?this.GetItem(i):null;if(_b4){this.TextCache[i]=_b4.Text;if(!this.FilterString||(this.FilterString&&this.TextCache[i].toLowerCase().indexOf(this.FilterString)==0)){if(_b1>0){this.RenderMissingItems(_b2,_b1);_b1=0;}this.RenderItem(_b4,_b2);}}else{_b1++;}}if(_b1>0){this.RenderMissingItems(_b2,_b1);_b1=0;}_b0.innerHTML=_b2.join("");}};ComponentArt_ComboBox.prototype.RenderItem=function(_b5,_b6){var _b7=_b5.CssClass?_b5.CssClass:this.ItemCssClass;if(!_b5.Enabled&&this.DisabledItemCssClass){_b7+=" "+this.DisabledItemCssClass;}if(this.SelectedItemCssClass&&_b5.Index==this.SelectedIndex){_b7+=" "+this.SelectedItemCssClass;}var _b8=this.SelectedItemHoverCssClass&&_b5.Index==this.SelectedIndex?this.SelectedItemHoverCssClass:this.ItemHoverCssClass;this.CssClasses[_b5.Index]={"Base":_b7,"Hover":_b8};_b6[_b6.length]="<div style=\"text-wrap:none;\" id=\""+this.Id+"_item_"+_b5.Index+"\"";if(_b7){_b6[_b6.length]=" class=\""+_b7+"\"";}if(_b5.Enabled){if(_b8){_b6[_b6.length]=" onmouseover=\""+this.Id+".HandleItemMouseOver(event,this, "+_b5.Index+");\"";_b6[_b6.length]=" onmouseout=\""+this.Id+".HandleItemMouseOut(event,this, "+_b5.Index+");\"";}_b6[_b6.length]=" onclick=\""+this.Id+".HandleClick(event,this,"+_b5.Index+")\"";}_b6[_b6.length]=" onmousedown=\"ComponentArt_CancelEvent(event)\"><nobr>";var _b9=_b5.ClientTemplateId?_b5.ClientTemplateId:this.ItemClientTemplateId;if(_b9){var _ba=this.GetClientTemplate(_b9);if(_ba){var _bb=ComponentArt_InstantiateClientTemplate(_ba,this,_b5);if(_bb){_b6[_b6.length]=_bb;}}}else{_b6[_b6.length]=_b5.Text;}_b6[_b6.length]="</nobr></div>";};ComponentArt_ComboBox.prototype.RenderMissingItem=function(_bc){_bc[_bc.length]="<div style=\"visibility:hidden;overflow:hidden;\" class=\""+this.ItemCssClass+"\">&nbsp;</div>";};ComponentArt_ComboBox.prototype.RenderMissingItems=function(_bd,_be){_bd[_bd.length]="<div style=\"visibility:hidden;overflow:hidden;height:"+(_be*this.ItemHeight)+"px;\">&nbsp;</div>";};ComponentArt_ComboBox.prototype.RestoreInputBox=function(){if(this.InputBox){var _bf=document.getElementById(this.Id+"_InputBoxPlaceHolder");if(_bf){_bf.parentNode.replaceChild(this.InputBox,_bf);this.InputBox.focus();this.InputBox=null;}else{clearTimeout(this.RestoreInputBoxTimeout);this.RestoreInputBoxTimeout=setTimeout(this.Id+".RestoreInputBox()",10);}}};ComponentArt_ComboBox.prototype.SaveData=function(){var _c0=document.getElementById(this.Id+"_Data");if(_c0){_c0.value=ComponentArt_ArrayToXml(this.Data,true);}};ComponentArt_ComboBox.prototype.ScrollIntoView=function(_c1){var _c2=document.getElementById(this.Id+"_item_"+_c1);var _c3=document.getElementById(this.Id+"_DropDownContent");if(_c2){if(_c2.offsetTop+_c2.offsetHeight>_c3.scrollTop+_c3.offsetHeight||_c2.offsetTop<_c3.scrollTop){_c3.scrollTop=_c2.offsetTop;}}};ComponentArt_ComboBox.prototype.SelectItem=function(_c4,_c5){if(!_c4.Enabled){return;}var _c6=_c4.Index;if(_c6==this.SelectedIndex){return;}if(this.SelectedItemCssClass){if(this.SelectedIndex>=0){var _c7=this.GetItem(this.SelectedIndex);if(_c7){var _c8=_c7.CssClass?_c7.CssClass:this.ItemCssClass;if(this.CssClasses[this.SelectedIndex]){this.CssClasses[this.SelectedIndex].Base=_c8;if(this.ItemHoverCssClass){this.CssClasses[this.SelectedIndex].Hover=_c8+" "+this.ItemHoverCssClass;}}var _c9=document.getElementById(this.Id+"_item_"+this.SelectedIndex);if(_c9){_c9.className=_c8;}}}if(this.CssClasses[_c6]){this.CssClasses[_c6].Base+=" "+this.SelectedItemCssClass;if(this.SelectedHoverCssClass){this.CssClasses[_c6].Hover+=" "+this.SelectedHoverCssClass;}var _ca=document.getElementById(this.Id+"_item_"+_c6);if(_ca){_ca.className=this.CssClasses[_c6].Base;}}}this.SelectedIndex=_c6;var _cb=document.getElementById(this.Id+"_SelectedIndex");if(_cb){_cb.value=_c6;}var _cc=document.getElementById(this.Id+"_Input");if(_cc){_cc.value=_c4.Text;}this.Render();this.ScrollIntoView(_c6);if(!_c5){var _cd=this.get_events().getHandler("change");if(_cd){_cd(this,Sys.EventArgs.Empty);}}};ComponentArt_ComboBox.prototype.SelectItemByIndex=function(_ce){var _cf=this.GetItem(_ce);if(_cf){this.SelectItem(_cf);}};ComponentArt_ComboBox.prototype.ShowOverlay=function(){if(!cart_browser_ie){return;}var _d0=document.getElementById(this.Id+"_DropDown");if(!this.OverlayElement){var _d1=document.createElement("iframe");_d1.src="javascript:false";_d1.style.position="absolute";if(cart_browser_ie){_d1.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)";}else{_d1.style.opacity=0;_d1.style.setProperty("-moz-opacity",0,"");}_d0.parentNode.insertBefore(_d1,_d0);this.OverlayElement=_d1;}this.OverlayElement.style.top=_d0.style.top;this.OverlayElement.style.left=_d0.style.left;this.OverlayElement.style.width=_d0.offsetWidth+"px";this.OverlayElement.style.height=_d0.offsetHeight+"px";this.OverlayElement.style.display="";};ComponentArt_ComboBox.prototype.ShowReloading=function(){var _d2=document.getElementById(this.Id+"_DropDownContent");_d2.innerHTML="";if(!this.Expanded){return;}if(!this.CallbackProgressDomObj){this.CallbackProgressDomObj=document.createElement("div");this.CallbackProgressDomObj.style.position="absolute";this.CallbackProgressDomObj.style.display="none";this.CallbackProgressDomObj.style.textAlign="center";if(this.LoadingClientTemplateId){var _d3=this.GetClientTemplate(this.LoadingClientTemplateId);if(_d3){var _d4=ComponentArt_InstantiateClientTemplate(_d3,this,null);if(_d4){this.CallbackProgressDomObj.innerHTML=_d4;}}}else{this.CallbackProgressDomObj.innerHTML=this.LoadingText;}document.body.insertBefore(this.CallbackProgressDomObj,document.body.firstChild);}var _d2=document.getElementById(this.Id+"_DropDownContent");if(_d2){this.CallbackProgressDomObj.style.top=_q86(_d2)+"px";this.CallbackProgressDomObj.style.left=_q85(_d2)+"px";this.CallbackProgressDomObj.style.width=ComponentArt_GetAdjustedWidth(_d2)+"px";this.CallbackProgressDomObj.style.height=ComponentArt_GetAdjustedHeight(_d2)+"px";this.CallbackProgressDomObj.style.zIndex=_d2.style.zIndex+1;this.CallbackProgressDomObj.style.display="";}};ComponentArt_ComboBox.prototype.ToggleExpand=function(){if(this.Expanded){this.Collapse();}else{this.Expand();}};ComponentArt_ComboBox.prototype.UnloadStalePage=function(){var _d5=this.PageViews.slice().sort(function(a,b){return (!a?1:!b?-1:a-b);});var _d8=_d5[0];for(var i=0;i<this.PageViews.length;i++){if(this.PageViews[i]==_d8){this.PageViews[i]=null;var _da=i*this.DropDownPageSize;var _db=_da+this.DropDownPageSize;for(var j=_da;j<_db;j++){this.Data[j]=null;}this.LoadedItemCount-=(_db-_da);break;}}};ComponentArt_ComboBox.prototype.UnSelect=function(){if(this.SelectedItemCssClass){if(this.SelectedIndex>=0){var _dd=this.GetItem(this.SelectedIndex);if(_dd){var _de=_dd.CssClass?_dd.CssClass:this.ItemCssClass;this.CssClasses[this.SelectedIndex].Base=_de;if(this.ItemHoverCssClass){this.CssClasses[this.SelectedIndex].Hover=_de+" "+this.ItemHoverCssClass;}var _df=document.getElementById(this.Id+"_item_"+this.SelectedIndex);if(_df){_df.className=_de;}}}}this.SelectedIndex=-1;var _e0=document.getElementById(this.Id+"_SelectedIndex");if(_e0){_e0.value=-1;}this.Render();this.ScrollIntoView(0);var _e1=this.get_events().getHandler("change");if(_e1){_e1(this,Sys.EventArgs.Empty);}};window.ComponentArt_ComboBox_Kernel_Loaded=true;}
